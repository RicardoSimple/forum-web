{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport router from '@/router';\nexport default {\n  name: \"register\",\n  data: function data() {\n    return {\n      obj: {},\n      defaultData: {\n        username: null,\n        password: null\n      },\n      uri: {\n        sendEmailAuthCode: \"/api/client/tool/toolUser/sendEmailAuthCode\",\n        register: \"/api/client/tool/toolUser/register\"\n      }\n    };\n  },\n  props: {\n    closeDialog: []\n  },\n  computed: {\n    option: function option() {\n      return {\n        submitBtn: false,\n        emptyBtn: false,\n        submitText: '登陆',\n        column: [{\n          label: '昵称',\n          prop: 'nickname',\n          maxlength: 16,\n          showWordLimit: true,\n          span: 20,\n          rules: [{\n            required: true,\n            message: \"请输入 昵称\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: '邮箱',\n          prop: 'email',\n          maxlength: 32,\n          showWordLimit: true,\n          span: 20,\n          rules: [{\n            required: true,\n            message: \"请输入 邮箱\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: '邮箱验证',\n          prop: 'emailCode',\n          maxlength: 6,\n          showWordLimit: true,\n          span: 20,\n          rules: [{\n            required: true,\n            message: \"请输入 邮箱验证码\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: '账号',\n          prop: 'username',\n          tip: '输入邮箱后自动获取@符号前的对应的账号或手机号填入',\n          disabled: true,\n          maxlength: 32,\n          showWordLimit: true,\n          span: 20,\n          rules: [{\n            required: true,\n            message: \"账号\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: '密码',\n          prop: 'password',\n          type: \"password\",\n          maxlength: 18,\n          showWordLimit: true,\n          span: 20,\n          rules: [{\n            required: true,\n            message: \"请输入 密码\",\n            trigger: \"blur\"\n          }]\n        }, {\n          label: '确认密码',\n          prop: 'passwordTwo',\n          type: \"password\",\n          maxlength: 18,\n          showWordLimit: true,\n          span: 20,\n          rules: [{\n            required: true,\n            message: \"请输入 确认密码\",\n            trigger: \"blur\"\n          }]\n        }]\n      };\n    }\n  },\n  created: function created() {\n    this.obj = this.defaultData;\n  },\n  methods: {\n    emptytChange: function emptytChange() {\n      this.closeDialog(false);\n    },\n    sendEmailCode: function sendEmailCode() {\n      this.crud.post(this.uri.sendEmailAuthCode, null, {\n        email: this.obj.email\n      }).then(function (res) {// 处理发送按钮，60秒倒计时，先不管\n      });\n    },\n    submit: function submit(form) {\n      if (this.obj.password !== this.obj.passwordTwo) {\n        this.$message.error(\"两次输入的密码不一致\");\n        throw new Error(\"两次输入的密码不一致\");\n      }\n\n      this.crud.post(this.uri.register, this.obj).then(function (res) {\n        // 注册成功跳登录界面\n        router.push({\n          path: \"/login\"\n        });\n      });\n    }\n  },\n  watch: {\n    // newNum = 新值，旧值\n    \"obj.email\": function objEmail(newNum, oldNum) {\n      console.log(newNum);\n\n      if (newNum != null && newNum.indexOf(\"@\") != -1) {\n        var index = newNum.indexOf(\"@\");\n        this.obj.username = newNum.substring(0, index);\n      } else {\n        this.obj.username = null;\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;EACAA,gBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,OADA;MAEAC;QACAC,cADA;QAEAC;MAFA,CAFA;MAMAC;QACAC,gEADA;QAEAC;MAFA;IANA;EAWA,CAdA;EAeAC;IACAC;EADA,CAfA;EAkBAC;IACAC,MADA,oBACA;MACA;QACAC,gBADA;QAEAC,eAFA;QAGAC,gBAHA;QAIAC,SACA;UACAC,WADA;UAEAC,gBAFA;UAGAC,aAHA;UAIAC,mBAJA;UAKAC,QALA;UAMAC;YACAC,cADA;YAEAC,iBAFA;YAGAC;UAHA;QANA,CADA,EAaA;UACAR,WADA;UAEAC,aAFA;UAGAC,aAHA;UAIAC,mBAJA;UAKAC,QALA;UAMAC;YACAC,cADA;YAEAC,iBAFA;YAGAC;UAHA;QANA,CAbA,EAyBA;UACAR,aADA;UAEAC,iBAFA;UAGAC,YAHA;UAIAC,mBAJA;UAKAC,QALA;UAMAC;YACAC,cADA;YAEAC,oBAFA;YAGAC;UAHA;QANA,CAzBA,EAqCA;UACAR,WADA;UAEAC,gBAFA;UAGAQ,gCAHA;UAIAC,cAJA;UAKAR,aALA;UAMAC,mBANA;UAOAC,QAPA;UAQAC;YACAC,cADA;YAEAC,aAFA;YAGAC;UAHA;QARA,CArCA,EAmDA;UACAR,WADA;UAEAC,gBAFA;UAGAU,gBAHA;UAIAT,aAJA;UAKAC,mBALA;UAMAC,QANA;UAOAC;YACAC,cADA;YAEAC,iBAFA;YAGAC;UAHA;QAPA,CAnDA,EAgEA;UACAR,aADA;UAEAC,mBAFA;UAGAU,gBAHA;UAIAT,aAJA;UAKAC,mBALA;UAMAC,QANA;UAOAC;YACAC,cADA;YAEAC,mBAFA;YAGAC;UAHA;QAPA,CAhEA;MAJA;IAmFA;EArFA,CAlBA;EAyGAI,OAzGA,qBAyGA;IACA;EACA,CA3GA;EA4GAC;IACAC,YADA,0BACA;MACA;IACA,CAHA;IAIAC,aAJA,2BAIA;MACA;QAAAC;MAAA,wBACA;MACA,CAFA;IAGA,CARA;IASAC,MATA,kBASAC,IATA,EASA;MACA;QACA;QACA;MACA;;MAEA;QACA;QACAC;UAAAC;QAAA;MACA,CAHA;IAIA;EAnBA,CA5GA;EAiIAC;IACA;IACA;MACAC;;MACA;QACA;QACA;MACA,CAHA,MAGA;QACA;MACA;IACA;EAVA;AAjIA","names":["name","data","obj","defaultData","username","password","uri","sendEmailAuthCode","register","props","closeDialog","computed","option","submitBtn","emptyBtn","submitText","column","label","prop","maxlength","showWordLimit","span","rules","required","message","trigger","tip","disabled","type","created","methods","emptytChange","sendEmailCode","email","submit","form","router","path","watch","console"],"sourceRoot":"src/views/login","sources":["register.vue"],"sourcesContent":["<template>\r\n    <div>\r\n\r\n        <el-card class=\"box-card\" style=\"margin-left: 25%;background-color: #fffdf5;overflow:auto; width: 50%;margin-top: 1.5%\">\r\n            <span> 注册账号</span>\r\n            <avue-form style=\"margin-top: 5%\" ref=\"form\" v-model=\"obj\" :option=\"option\"\r\n                       @reset-change=\"emptytChange\"\r\n                       @submit=\"submit\">\r\n\r\n                <template slot-scope=\"{}\" slot=\"email\">\r\n                    <div>\r\n                        <el-input style=\"float:left;width: 70%\" v-model=\"obj.email\" placeholder=\"请输入邮箱\"></el-input>\r\n                        <el-button style=\"float:left;margin-left: 2%\" @click=\"sendEmailCode\">发送验证码</el-button>\r\n                    </div>\r\n\r\n                </template>\r\n            </avue-form>\r\n\r\n            <!-- 注意： 自定义的提交按钮 参数验证无效 -->\r\n            <el-button @click=\"submit\">注册</el-button>\r\n            <span src=\"\" style=\"margin-left: 3%;text-align: center ; font-size: 12px\">\r\n                <router-link to=\"/login\">登录</router-link>\r\n             </span>\r\n        </el-card>\r\n    </div>\r\n</template>\r\n<script>\r\n    import router from '@/router'\r\n    export default {\r\n        name: \"register\",\r\n        data() {\r\n            return {\r\n                obj: {},\r\n                defaultData: {\r\n                    username: null,\r\n                    password: null,\r\n                },\r\n                uri: {\r\n                    sendEmailAuthCode: \"/api/client/tool/toolUser/sendEmailAuthCode\",\r\n                    register: \"/api/client/tool/toolUser/register\",\r\n                },\r\n            }\r\n        },\r\n        props: {\r\n            closeDialog: [],\r\n        },\r\n        computed: {\r\n            option() {\r\n                return {\r\n                    submitBtn: false,\r\n                    emptyBtn: false,\r\n                    submitText: '登陆',\r\n                    column: [\r\n                        {\r\n                            label: '昵称',\r\n                            prop: 'nickname',\r\n                            maxlength: 16,\r\n                            showWordLimit: true,\r\n                            span: 20,\r\n                            rules: [{\r\n                                required: true,\r\n                                message: \"请输入 昵称\",\r\n                                trigger: \"blur\"\r\n                            }]\r\n                        },\r\n                        {\r\n                            label: '邮箱',\r\n                            prop: 'email',\r\n                            maxlength: 32,\r\n                            showWordLimit: true,\r\n                            span: 20,\r\n                            rules: [{\r\n                                required: true,\r\n                                message: \"请输入 邮箱\",\r\n                                trigger: \"blur\"\r\n                            }]\r\n                        },\r\n                        {\r\n                            label: '邮箱验证',\r\n                            prop: 'emailCode',\r\n                            maxlength: 6,\r\n                            showWordLimit: true,\r\n                            span: 20,\r\n                            rules: [{\r\n                                required: true,\r\n                                message: \"请输入 邮箱验证码\",\r\n                                trigger: \"blur\"\r\n                            }]\r\n                        },\r\n                        {\r\n                            label: '账号',\r\n                            prop: 'username',\r\n                            tip: '输入邮箱后自动获取@符号前的对应的账号或手机号填入',\r\n                            disabled: true,\r\n                            maxlength: 32,\r\n                            showWordLimit: true,\r\n                            span: 20,\r\n                            rules: [{\r\n                                required: true,\r\n                                message: \"账号\",\r\n                                trigger: \"blur\"\r\n                            }]\r\n                        },\r\n                        {\r\n                            label: '密码',\r\n                            prop: 'password',\r\n                            type: \"password\",\r\n                            maxlength: 18,\r\n                            showWordLimit: true,\r\n                            span: 20,\r\n                            rules: [{\r\n                                required: true,\r\n                                message: \"请输入 密码\",\r\n                                trigger: \"blur\"\r\n                            }]\r\n                        },\r\n                        {\r\n                            label: '确认密码',\r\n                            prop: 'passwordTwo',\r\n                            type: \"password\",\r\n                            maxlength: 18,\r\n                            showWordLimit: true,\r\n                            span: 20,\r\n                            rules: [{\r\n                                required: true,\r\n                                message: \"请输入 确认密码\",\r\n                                trigger: \"blur\"\r\n                            }]\r\n                        },\r\n                    ]\r\n                }\r\n            }\r\n        },\r\n        created() {\r\n            this.obj = this.defaultData\r\n        },\r\n        methods: {\r\n            emptytChange() {\r\n                this.closeDialog(false);\r\n            },\r\n            sendEmailCode() {\r\n                this.crud.post(this.uri.sendEmailAuthCode, null, {email: this.obj.email}).then((res) => {\r\n                    // 处理发送按钮，60秒倒计时，先不管\r\n                })\r\n            },\r\n            submit(form) {\r\n                if (this.obj.password !== this.obj.passwordTwo) {\r\n                    this.$message.error(\"两次输入的密码不一致\")\r\n                    throw new Error(\"两次输入的密码不一致\")\r\n                }\r\n\r\n                this.crud.post(this.uri.register, this.obj).then((res) => {\r\n                    // 注册成功跳登录界面\r\n                    router.push({path: \"/login\"});\r\n                })\r\n            },\r\n        },\r\n        watch: {\r\n            // newNum = 新值，旧值\r\n            \"obj.email\": function (newNum, oldNum) {\r\n                console.log(newNum)\r\n                if (newNum != null && newNum.indexOf(\"@\") != -1) {\r\n                    let index = newNum.indexOf(\"@\");\r\n                    this.obj.username = newNum.substring(0, index);\r\n                } else {\r\n                    this.obj.username = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}